import{useState as r,useEffect as e}from"react";import o from"colorthief/dist/color-thief.mjs";var n=function(r,e,o){var n=function(r){return r.toString(16).padStart(2,"0")};return"#"+n(r)+n(e)+n(o)};export default function(t,i){var c=void 0===i?{}:i,l=c.format,u=void 0===l?"rgb":l,a=c.quality,f=void 0===a?10:a,s=c.colorCount,d=void 0===s?10:s,v=r(""),g=v[0],m=v[1],p=r({color:null,palette:null}),h=p[0],y=p[1];return e(function(){if(console.log("Fired source effect",t),t){if(t.current&&t.current instanceof HTMLImageElement&&t.current.src!==window.location.href){var r=function(){console.log("setCurrentSrc"),t.current.src&&m(t.current.src)};r();var e=new MutationObserver(r);return e.observe(t.current,{attributes:!0}),function(){e.disconnect()}}"string"==typeof t&&t.length&&m(t)}return function(){}},[t]),e(function(){console.log("Fired url effect",g);var r=!0;if(g){console.log("URL is defined:",g);var e=new Image;e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.addEventListener("load",function t(){if(console.log("handleImageLoad"),r){var i=new o,c=i.getColor(e,f),l=i.getPalette(e,d,f);"hex"===u&&(c=n.apply(void 0,c),l=l.map(function(r){return n.apply(void 0,r)})),y({color:c,palette:l}),e.removeEventListener("load",t)}}),e.src=g}return function(){r=!1}},[g,d,f,u]),h}
//# sourceMappingURL=use-color-thief.esm.js.map
