var e=require("react");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=r(require("colorthief/dist/color-thief.mjs")),n=function(e,r,t){var n=function(e){return e.toString(16).padStart(2,"0")};return"#"+n(e)+n(r)+n(t)};module.exports=function(r,o){var c=void 0===o?{}:o,i=c.format,u=void 0===i?"rgb":i,a=c.quality,l=void 0===a?10:a,f=c.colorCount,s=void 0===f?10:f,d=e.useState(""),v=d[0],g=d[1],p=e.useState({color:null,palette:null}),m=p[0],y=p[1];return e.useEffect(function(){if(console.log("Fired source effect",r),r){if(r.current&&r.current instanceof HTMLImageElement&&r.current.src!==window.location.href){var e=function(){console.log("setCurrentSrc"),r.current.src&&g(r.current.src)};e();var t=new MutationObserver(e);return t.observe(r.current,{attributes:!0}),function(){t.disconnect()}}"string"==typeof r&&r.length&&g(r)}return function(){}},[r]),e.useEffect(function(){console.log("Fired url effect",v);var e=!0;if(v){console.log("URL is defined:",v);var r=new Image;r.crossOrigin="anonymous",r.referrerPolicy="no-referrer",r.addEventListener("load",function o(){if(console.log("handleImageLoad"),e){var c=new t.default,i=c.getColor(r,l),a=c.getPalette(r,s,l);"hex"===u&&(i=n.apply(void 0,i),a=a.map(function(e){return n.apply(void 0,e)})),y({color:i,palette:a}),r.removeEventListener("load",o)}}),r.src=v}return function(){e=!1}},[v,s,l,u]),m};
//# sourceMappingURL=use-color-thief.js.map
