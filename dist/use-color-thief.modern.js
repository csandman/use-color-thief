import{useState as t,useEffect as e}from"react";import r from"colorthief";const o=(t,e,r)=>{const o=t=>t.toString(16).padStart(2,"0");return`#${o(t)}${o(e)}${o(r)}`};export default(n,c)=>{const{format:s="rgb",quality:i=10,colorCount:l=10}=c,[a,f]=t(""),[u,m]=t({color:null,palette:null});return e(()=>{if(n)if("string"==typeof n&&n.length)f(n);else{const{current:t}=n;if(t&&t instanceof HTMLImageElement&&t.src!==window.location.href){const e=()=>{t.src&&f(t.src)};e();const r=new MutationObserver(e);return r.observe(t,{attributes:!0}),()=>{r.disconnect()}}}return()=>{}},[n]),e(()=>{let t=!0;if(a){const e=new Image;e.crossOrigin="anonymous",e.referrerPolicy="no-referrer";const n=()=>{if(t){const t=new r;let c=t.getColor(e,i),a=t.getPalette(e,l,i);if("hex"===s){const[t,e,r]=c;c=o(t,e,r),a=a.map(([t,e,r])=>o(t,e,r))}m({color:c,palette:a}),e.removeEventListener("load",n)}};e.addEventListener("load",n),e.src=a}return()=>{t=!1}},[a,l,i,s]),u};
//# sourceMappingURL=use-color-thief.modern.js.map
