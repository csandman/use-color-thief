import{useState as e,useEffect as t}from"react";import r from"colorthief";var o;!function(e){e.rgb="rgb",e.hex="hex"}(o||(o={}));const n=(e,t,r)=>{const o=e=>e.toString(16).padStart(2,"0");return`#${o(e)}${o(t)}${o(r)}`};export default(o,c)=>{const{format:s="rgb",quality:i=10,colorCount:l=10}=c,[a,f]=e(""),[u,g]=e({color:null,palette:null});return t(()=>{if(o)if("string"==typeof o&&o.length)f(o);else{const{current:e}=o;if(e&&e instanceof HTMLImageElement&&e.src!==window.location.href){const t=()=>{e.src&&f(e.src)};t();const r=new MutationObserver(t);return r.observe(e,{attributes:!0}),()=>{r.disconnect()}}}return()=>{}},[o]),t(()=>{let e=!0;if(a){const t=new Image;t.crossOrigin="anonymous",t.referrerPolicy="no-referrer";const o=()=>{if(e){const e=new r;let c=e.getColor(t,i),a=e.getPalette(t,l,i);if("hex"===s){const[e,t,r]=c;c=n(e,t,r),a=a.map(([e,t,r])=>n(e,t,r))}g({color:c,palette:a}),t.removeEventListener("load",o)}};t.addEventListener("load",o),t.src=a}return()=>{e=!1}},[a,l,i,s]),u};export{o as FormatString};
//# sourceMappingURL=use-color-thief.modern.js.map
