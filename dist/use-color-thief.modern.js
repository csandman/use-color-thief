import{useState as r,useEffect as t}from"react";import e from"colorthief/dist/color-thief.mjs";const n=(r,t,e)=>{const n=r=>r.toString(16).padStart(2,"0");return`#${n(r)}${n(t)}${n(e)}`};export default(o,{format:c="rgb",quality:s=10,colorCount:i=10}={})=>{const[l,a]=r(""),[u,f]=r({color:null,palette:null});return t(()=>{if(o){if(o.current&&o.current instanceof HTMLImageElement&&o.current.src!==window.location.href){const r=()=>{o.current.src&&a(o.current.src)};r();const t=new MutationObserver(r);return t.observe(o.current,{attributes:!0}),()=>{t.disconnect()}}"string"==typeof o&&o.length&&a(o)}return()=>{}},[o]),t(()=>{let r=!0;if(l){const t=new Image;t.crossOrigin="anonymous",t.referrerPolicy="no-referrer";const o=()=>{if(r){const r=new e;let l=r.getColor(t,s),a=r.getPalette(t,i,s);"hex"===c&&(l=n(...l),a=a.map(r=>n(...r))),f({color:l,palette:a}),t.removeEventListener("load",o)}};t.addEventListener("load",o),t.src=l}return()=>{r=!1}},[l,i,s,c]),u};
//# sourceMappingURL=use-color-thief.modern.js.map
